export default class Magic {
  constructor(mask, factor, offset) {
    this.mask = mask;
    this.factor = factor;
    this.offset = offset;
  }

  bishopIndex(occupied) {
    return Number((this.factor * (occupied & this.mask)) >> BigInt(64 - 9)) + this.offset;
  }
  rookIndex(occupied) {
    return Number((this.factor * (occupied & this.mask)) >> BigInt(64 - 12)) + this.offset;
  }

  static ROOK = [
    new Magic(0x000101010101017en, 0x00280077ffebfffen, 26304),
    new Magic(0x000202020202027cn, 0x2004010201097fffn, 35520),
    new Magic(0x000404040404047an, 0x0010020010053fffn, 38592),
    new Magic(0x0008080808080876n, 0x0040040008004002n, 8026),
    new Magic(0x001010101010106en, 0x7fd00441ffffd003n, 22196),
    new Magic(0x002020202020205en, 0x4020008887dffffen, 80870),
    new Magic(0x004040404040403en, 0x004000888847ffffn, 76747),
    new Magic(0x008080808080807en, 0x006800fbff75fffdn, 30400),
    new Magic(0x0001010101017e00n, 0x000028010113ffffn, 11115),
    new Magic(0x0002020202027c00n, 0x0020040201fcffffn, 18205),
    new Magic(0x0004040404047a00n, 0x007fe80042ffffe8n, 53577),
    new Magic(0x0008080808087600n, 0x00001800217fffe8n, 62724),
    new Magic(0x0010101010106e00n, 0x00001800073fffe8n, 34282),
    new Magic(0x0020202020205e00n, 0x00001800e05fffe8n, 29196),
    new Magic(0x0040404040403e00n, 0x00001800602fffe8n, 23806),
    new Magic(0x0080808080807e00n, 0x000030002fffffa0n, 49481),
    new Magic(0x00010101017e0100n, 0x00300018010bffffn, 2410),
    new Magic(0x00020202027c0200n, 0x0003000c0085fffbn, 36498),
    new Magic(0x00040404047a0400n, 0x0004000802010008n, 24478),
    new Magic(0x0008080808760800n, 0x0004002020020004n, 10074),
    new Magic(0x00101010106e1000n, 0x0001002002002001n, 79315),
    new Magic(0x00202020205e2000n, 0x0001001000801040n, 51779),
    new Magic(0x00404040403e4000n, 0x0000004040008001n, 13586),
    new Magic(0x00808080807e8000n, 0x0000006800cdfff4n, 19323),
    new Magic(0x000101017e010100n, 0x0040200010080010n, 70612),
    new Magic(0x000202027c020200n, 0x0000080010040010n, 83652),
    new Magic(0x000404047a040400n, 0x0004010008020008n, 63110),
    new Magic(0x0008080876080800n, 0x0000040020200200n, 34496),
    new Magic(0x001010106e101000n, 0x0002008010100100n, 84966),
    new Magic(0x002020205e202000n, 0x0000008020010020n, 54341),
    new Magic(0x004040403e404000n, 0x0000008020200040n, 60421),
    new Magic(0x008080807e808000n, 0x0000820020004020n, 86402),
    new Magic(0x0001017e01010100n, 0x00fffd1800300030n, 50245),
    new Magic(0x0002027c02020200n, 0x007fff7fbfd40020n, 76622),
    new Magic(0x0004047a04040400n, 0x003fffbd00180018n, 84676),
    new Magic(0x0008087608080800n, 0x001fffde80180018n, 78757),
    new Magic(0x0010106e10101000n, 0x000fffe0bfe80018n, 37346),
    new Magic(0x0020205e20202000n, 0x0001000080202001n, 370),
    new Magic(0x0040403e40404000n, 0x0003fffbff980180n, 42182),
    new Magic(0x0080807e80808000n, 0x0001fffdff9000e0n, 45385),
    new Magic(0x00017e0101010100n, 0x00fffefeebffd800n, 61659),
    new Magic(0x00027c0202020200n, 0x007ffff7ffc01400n, 12790),
    new Magic(0x00047a0404040400n, 0x003fffbfe4ffe800n, 16762),
    new Magic(0x0008760808080800n, 0x001ffff01fc03000n, 0),
    new Magic(0x00106e1010101000n, 0x000fffe7f8bfe800n, 38380),
    new Magic(0x00205e2020202000n, 0x0007ffdfdf3ff808n, 11098),
    new Magic(0x00403e4040404000n, 0x0003fff85fffa804n, 21803),
    new Magic(0x00807e8080808000n, 0x0001fffd75ffa802n, 39189),
    new Magic(0x007e010101010100n, 0x00ffffd7ffebffd8n, 58628),
    new Magic(0x007c020202020200n, 0x007fff75ff7fbfd8n, 44116),
    new Magic(0x007a040404040400n, 0x003fff863fbf7fd8n, 78357),
    new Magic(0x0076080808080800n, 0x001fffbfdfd7ffd8n, 44481),
    new Magic(0x006e101010101000n, 0x000ffff810280028n, 64134),
    new Magic(0x005e202020202000n, 0x0007ffd7f7feffd8n, 41759),
    new Magic(0x003e404040404000n, 0x0003fffc0c480048n, 1394),
    new Magic(0x007e808080808000n, 0x0001ffffafd7ffd8n, 40910),
    new Magic(0x7e01010101010100n, 0x00ffffe4ffdfa3ban, 66516),
    new Magic(0x7c02020202020200n, 0x007fffef7ff3d3dan, 3897),
    new Magic(0x7a04040404040400n, 0x003fffbfdfeff7fan, 3930),
    new Magic(0x7608080808080800n, 0x001fffeff7fbfc22n, 72934),
    new Magic(0x6e10101010101000n, 0x0000020408001001n, 72662),
    new Magic(0x5e20202020202000n, 0x0007fffeffff77fdn, 56325),
    new Magic(0x3e40404040404000n, 0x0003ffffbf7dfeecn, 66501),
    new Magic(0x7e80808080808000n, 0x0001ffff9dffa333n, 14826),
  ];

  static BISHOP = [
    new Magic(0x0040201008040200n, 0x007fbfbfbfbfbfffn, 5378),
    new Magic(0x0000402010080400n, 0x0000a060401007fcn, 4093),
    new Magic(0x0000004020100a00n, 0x0001004008020000n, 4314),
    new Magic(0x0000000040221400n, 0x0000806004000000n, 6587),
    new Magic(0x0000000002442800n, 0x0000100400000000n, 6491),
    new Magic(0x0000000204085000n, 0x000021c100b20000n, 6330),
    new Magic(0x0000020408102000n, 0x0000040041008000n, 5609),
    new Magic(0x0002040810204000n, 0x00000fb0203fff80n, 22236),
    new Magic(0x0020100804020000n, 0x0000040100401004n, 6106),
    new Magic(0x0040201008040000n, 0x0000020080200802n, 5625),
    new Magic(0x00004020100a0000n, 0x0000004010202000n, 16785),
    new Magic(0x0000004022140000n, 0x0000008060040000n, 16817),
    new Magic(0x0000000244280000n, 0x0000004402000000n, 6842),
    new Magic(0x0000020408500000n, 0x0000000801008000n, 7003),
    new Magic(0x0002040810200000n, 0x000007efe0bfff80n, 4197),
    new Magic(0x0004081020400000n, 0x0000000820820020n, 7356),
    new Magic(0x0010080402000200n, 0x0000400080808080n, 4602),
    new Magic(0x0020100804000400n, 0x00021f0100400808n, 4538),
    new Magic(0x004020100a000a00n, 0x00018000c06f3fffn, 29531),
    new Magic(0x0000402214001400n, 0x0000258200801000n, 45393),
    new Magic(0x0000024428002800n, 0x0000240080840000n, 12420),
    new Magic(0x0002040850005000n, 0x000018000c03fff8n, 15763),
    new Magic(0x0004081020002000n, 0x00000a5840208020n, 5050),
    new Magic(0x0008102040004000n, 0x0000020008208020n, 4346),
    new Magic(0x0008040200020400n, 0x0000804000810100n, 6074),
    new Magic(0x0010080400040800n, 0x0001011900802008n, 7866),
    new Magic(0x0020100a000a1000n, 0x0000804000810100n, 32139),
    new Magic(0x0040221400142200n, 0x000100403c0403ffn, 57673),
    new Magic(0x0002442800284400n, 0x00078402a8802000n, 55365),
    new Magic(0x0004085000500800n, 0x0000101000804400n, 15818),
    new Magic(0x0008102000201000n, 0x0000080800104100n, 5562),
    new Magic(0x0010204000402000n, 0x00004004c0082008n, 6390),
    new Magic(0x0004020002040800n, 0x0001010120008020n, 7930),
    new Magic(0x0008040004081000n, 0x000080809a004010n, 13329),
    new Magic(0x00100a000a102000n, 0x0007fefe08810010n, 7170),
    new Magic(0x0022140014224000n, 0x0003ff0f833fc080n, 27267),
    new Magic(0x0044280028440200n, 0x007fe08019003042n, 53787),
    new Magic(0x0008500050080400n, 0x003fffefea003000n, 5097),
    new Magic(0x0010200020100800n, 0x0000101010002080n, 6643),
    new Magic(0x0020400040201000n, 0x0000802005080804n, 6138),
    new Magic(0x0002000204081000n, 0x0000808080a80040n, 7418),
    new Magic(0x0004000408102000n, 0x0000104100200040n, 7898),
    new Magic(0x000a000a10204000n, 0x0003ffdf7f833fc0n, 42012),
    new Magic(0x0014001422400000n, 0x0000008840450020n, 57350),
    new Magic(0x0028002844020000n, 0x00007ffc80180030n, 22813),
    new Magic(0x0050005008040200n, 0x007fffdd80140028n, 56693),
    new Magic(0x0020002010080400n, 0x00020080200a0004n, 5818),
    new Magic(0x0040004020100800n, 0x0000101010100020n, 7098),
    new Magic(0x0000020408102000n, 0x0007ffdfc1805000n, 4451),
    new Magic(0x0000040810204000n, 0x0003ffefe0c02200n, 4709),
    new Magic(0x00000a1020400000n, 0x0000000820806000n, 4794),
    new Magic(0x0000142240000000n, 0x0000000008403000n, 13364),
    new Magic(0x0000284402000000n, 0x0000000100202000n, 4570),
    new Magic(0x0000500804020000n, 0x0000004040802000n, 4282),
    new Magic(0x0000201008040200n, 0x0004010040100400n, 14964),
    new Magic(0x0000402010080400n, 0x00006020601803f4n, 4026),
    new Magic(0x0002040810204000n, 0x0003ffdfdfc28048n, 4826),
    new Magic(0x0004081020400000n, 0x0000000820820020n, 7354),
    new Magic(0x000a102040000000n, 0x0000000008208060n, 4848),
    new Magic(0x0014224000000000n, 0x0000000000808020n, 15946),
    new Magic(0x0028440200000000n, 0x0000000001002020n, 14932),
    new Magic(0x0050080402000000n, 0x0000000401002008n, 16588),
    new Magic(0x0020100804020000n, 0x0000004040404040n, 6905),
    new Magic(0x0040201008040200n, 0x007fff9fdf7ff813n, 16076),
  ];
}
